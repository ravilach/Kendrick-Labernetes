############################################################
# Application properties - profile usage and invocation
#+ Profiles supported:
#  - h2      : Embedded H2 database (default). Best for quick local development.
#  - mongo   : Use MongoDB. Loads settings from `application-mongo.properties` and
#              reads `MONGODB_URI` when provided.
#  - postgres: Use Postgres. Activate Postgres profile to enable datasource autoconfiguration.
#
# How to invoke (examples):
#  1) Local shell (Postgres):
#     export DB_TYPE=postgres
#     export SPRING_PROFILES_ACTIVE=postgres
#     export SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/kendrick
#     export SPRING_DATASOURCE_USERNAME=postgres
#     export SPRING_DATASOURCE_PASSWORD=postgres
#     java -jar target/kendrick-labernetes-backend-0.0.1-SNAPSHOT.jar
#
#  2) Local shell (Mongo):
#     export DB_TYPE=mongo
#     export SPRING_PROFILES_ACTIVE=mongo
#     export MONGODB_URI="mongodb://<user>:<pass>@<host>:27017/kendrickquotes?authSource=admin"
#     java -jar target/kendrick-labernetes-backend-0.0.1-SNAPSHOT.jar
#
#  3) Docker run (Postgres example):
#     docker run -p 80:80 -p 8080:8080 \
#       -e DB_TYPE=postgres -e SPRING_PROFILES_ACTIVE=postgres \
#       -e SPRING_DATASOURCE_URL=jdbc:postgresql://host.docker.internal:5432/kendrick \
#       -e SPRING_DATASOURCE_USERNAME=postgres -e SPRING_DATASOURCE_PASSWORD=postgres \
#       <your-image>
#
#  4) Kubernetes (recommended):
#     - Set `DB_TYPE` in the Deployment env and set `SPRING_PROFILES_ACTIVE` to `mongo` or `postgres`.
#     - Use Kubernetes `Secret` objects and `valueFrom.secretKeyRef` for credentials (do not commit secrets).
#
# Notes:
#  - `DB_TYPE` is used by the application code to route operations, but Spring profiles
#    control which auto-configuration and properties files are loaded â€” set both when
#    switching persistence (e.g., set `DB_TYPE=postgres` and `SPRING_PROFILES_ACTIVE=postgres`).
#  - After changing DB-related env vars or profile settings you must restart/redeploy the app
#    for the new configuration to take effect.
############################################################

# Expose all actuator endpoints, including Prometheus
management.endpoints.web.exposure.include=*
management.endpoint.prometheus.enabled=true

# Set the active Spring profile:
# - mongo : Use remote MongoDB (set MONGODB_URI env variable)
# - h2    : Use embedded H2 (local/dev, fastest startup)
# Default to `h2` unless `SPRING_PROFILES_ACTIVE` is set (e.g. in k8s or CI)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:h2}

# Allow bean definition overriding (useful for switching DB configs)
spring.main.allow-bean-definition-overriding=true

# Set log verbosity for all classes under com.kendricklabernetes
# Levels: TRACE, DEBUG, INFO, WARN, ERROR, FATAL, OFF
logging.level.com.kendricklabernetes=DEBUG